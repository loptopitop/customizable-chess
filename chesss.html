<html>
    <head>
        <title> Customizable Chess </title>
    <head>
    <body>
        <h1> Customizable Chess </h1>
        <script>
//Setting up the boar

              // whitePieces.pawn.pattern();
              var whitePieces = {
                pawn: {
                  img: "Whitepawn.png",
                  canMoveTo: function(current, desired) { // 2 vectors

                  }
                },
                horse: {
                  img: "WhiteHorse.png"
                },
                queen:{
                  img: "whitequeen.png"
                },
                king:{
                  img: "Whiteking.png"

                },
                bishop:{
                  img: "whitebishop.png"

                },
                rook:{
                  img: "whiterook.png"

                }
              };


              var blackPieces = {
                pawn: {
                  img: "BlackPawn.png"


                },
                horse: {
                  img: "BlackHorse.png"

                },
                queen:{
                  img: "Queen.png"

                },
                king:{
                  img: "blackking.png"

                },
                bishop:{
                  img: "bishop.png"

                },
                rook:{
                  img: "BlackRook.png"

                }
              };

              var turn = "white";

              // placePiece('white', 'horse', 3, 2);
              // placePiece('black', 'pawn', 5, 4);

              var textbox = document.createElement('input');
              document.body.appendChild(textbox);
              textbox.value = "white";

              document.body.style.background = "lightblue"

              function makeBoard(numRows, numCells){
                var table2 = document.createElement("table");
                table2.style.background = "lightbrown";
                table2.style.borderWidth = "3px";
                table2.style.borderStyle = "solid";
                table2.style.borderColor = "green";

                for(var i = 0; i < numRows; i = i + 1){
                  row = table2.insertRow();

                  for(var j = 0; j < numCells; j++){
                    let cell = row.insertCell();
                    cell.style.borderWidth = "3px";
                    cell.style.borderStyle = "solid";
                    cell.style.borderColor = "green";
                    cell.style.width = "100px";
                    cell.style.height = "100px";
                    cell.addEventListener('click', function() {
                      moveSelectedPiece(cell);
                    })
                    cell.coordinates = {};
                    cell.coordinates.row = i;
                    cell.coordinates.cell = j;
                    var halfcells = (j / 2);
                    var halfrows = (i / 2);

                    if(Math.round( halfrows ) == halfrows) {
                      if(Math.round( halfcells ) == halfcells) {
                        cell.style.background = "white"
                      }
                    }
                    else if(Math.round( halfcells ) !== halfcells) {
                      cell.style.background = "white"
                    }
                  }
                }
                return table2;
              }

              var board = makeBoard(8, 8);
              document.body.appendChild(board);



              var selectedPiece;

              function clickCell(cellClicked){
                if( cellClicked.children.length > 0 ){
                  var pieceInCell = cellClicked.children[0];
                  if ( selectedPiece != undefined ) {
                    if ( pieceInCell.color == turn ) {
                      return;
                    }

                  }
                }
              }

              function moveSelectedPiece(cell){
                if(selectedPiece != undefined) {
                  cell.appendChild(selectedPiece);
                  selectedPiece._row = cell.coordinates.row;
                  selectedPiece._cell = cell.coordinates.cell;
                  switchturns();
                }
              }

              function selectPiece(piece) {
                unselect();
                if(turn == piece.color){
                  piece.style.background = "green";
                  selectedPiece = piece;
                } else {

                }
              }

              function placePiece(color, type, row, cell){
                var piece = document.createElement('img');
                if(color == 'white') {
                  piece.src= whitePieces[type].img;

                }
                if(color == 'black') {
                  piece.src = blackPieces[type].img;
                }
                piece.color = color;
                piece._cell = cell;
                piece._row = row;
                piece.style.height = "100px";
                piece.style.width = "100px";
                board.rows[row].cells[cell].appendChild(piece);
                piece.addEventListener('click', function highlight(){
                  var cell = board.rows[piece._row].cells[piece._cell];
                  if(selectedPiece != undefined && selectedPiece.color != piece.color){
                    piece.remove();
                    moveSelectedPiece(cell);
                  } else {
                    selectPiece(piece);
                  }
                  event.stopPropagation();
                });
                return piece
              }


              function unselect(){
                if(selectedPiece != undefined) {
                  selectedPiece.style.background = "";
                  selectedPiece = undefined;
                }
              }

              function switchturns() {
                unselect();
                if (turn == 'white') { turn = 'black'; }
                else { turn = 'white'; }
                textbox.value = turn;
              }


  //white pieces
              placePiece('white', 'pawn', 1, 0);
              placePiece('white', 'pawn', 1, 1);
              placePiece('white', 'pawn', 1, 2);
              placePiece('white', 'pawn', 1, 3);
              placePiece('white', 'pawn', 1, 4);
              placePiece('white', 'pawn', 1, 5);
              placePiece('white', 'pawn', 1, 6);
              placePiece('white', 'pawn', 1, 7);

              placePiece('white', 'horse', 0, 1);
              placePiece('white', 'horse', 0, 6);

              placePiece('white', 'bishop', 0, 2);
              placePiece('white', 'bishop', 0, 5);

              placePiece('white', 'rook', 0, 0)
              placePiece('white', 'rook', 0, 7)

              placePiece('white', 'king', 0, 3);

              placePiece('white', 'queen', 0, 4);

// black pieces

              placePiece('black', 'pawn', 6, 0);
              placePiece('black', 'pawn', 6, 1);
              placePiece('black', 'pawn', 6, 2);
              placePiece('black', 'pawn', 6, 3);
              placePiece('black', 'pawn', 6, 4);
              placePiece('black', 'pawn', 6, 5);
              placePiece('black', 'pawn', 6, 6);
              placePiece('black', 'pawn', 6, 7);

              placePiece('black', 'horse', 7, 1);
              placePiece('black', 'horse', 7, 6);

              placePiece('black', 'bishop', 7, 2);
              placePiece('black', 'bishop', 7, 5);

              placePiece('black', 'rook', 7, 0)
              placePiece('black', 'rook', 7, 7)

              placePiece('black', 'king', 7, 4);

              placePiece('black', 'queen', 7, 3);


        </script>
    </body>
</html>
